!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(r.polymorph={})}(this,function(r){"use strict"
var _=void 0,M="V",P="H",j="L",S="Z",C="M",E="C",T="S",$="Q",F="T",H="A",p=" ",h="fill",d="none"
function g(r){return"string"==typeof r}var n=Math,I=n.abs,u=n.min,y=n.max,l=n.floor,a=n.round,L=n.sqrt,e=n.pow,O=n.cos,Q=n.asin,V=n.sin,Z=n.tan,U=n.PI,k=2/3,f=e(2,-52)
function B(){throw new Error(Array.prototype.join.call(arguments,p))}function x(r,n){for(var e in n)r.hasOwnProperty(e)||(r[e]=n[e])
return r}var t="undefined"!=typeof window&&window.navigator.userAgent,i=/(MSIE |Trident\/|Edge\/)/i.test(t)?Array:Float32Array
function m(r){return new i(r)}function c(r,n,e,t){return L((r-e)*(r-e)+(n-t)*(n-t))}function w(r,n,e){var t=e.length
if(e[t-2]===e[0]&&e[t-1]===e[1]){var i,o,a=e.slice(2)
t=a.length
for(var f=0;f<t;f+=6){var u=c(r,n,a[f],a[f+1]);(o===_||u<o)&&(o=u,i=f)}!function(r,n){var e,t=r.length,i=t-n,o=m(n)
for(e=0;e<n;e++)o[e]=r[e]
for(e=n;e<t;e++)r[e-n]=r[e]
for(e=0;e<n;e++)r[i+e]=o[e]}(a,i),e[0]=a[t-2],e[1]=a[t-1]
for(f=0;f<a.length;f++)e[f+2]=a[f]}}function A(r,n){var e=n-r.length,t=Math.ceil(e/r.length),i=m(n)
i[0]=r[0],i[1]=r[1]
for(var o=1,a=1;a<n-1;){i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o],i[++a]=r[++o]
var f=i[++a]=r[++o],u=i[++a]=r[++o]
if(e)for(var l=0;l<t&&e;l++)i[a+5]=i[a+3]=i[a+1]=f,i[a+6]=i[a+4]=i[a+2]=u,a+=6,e-=6}return i}function o(r,n){return n.p-r.p}function v(r,n,e){var t=b(r),i=b(n),o=e.origin,a=o.x,f=o.y,u=o.absolute
t.length!==i.length&&(e.optimize===h?function r(n,e,t){var i=n.length,o=e.length
if(i<o)return r(e,n,t)
e.length=i
for(var a=o;a<i;a++){for(var f=n[a],u=m(f.d.length),l=0;l<f.d.length;l+=2)u[l]=t.absolute?t.x:f.x+f.w*t.x,u[l+1]=t.absolute?t.y:f.y+f.y*t.y
e[a]=x({d:u},f)}}(t,i,e.origin):B("optimize:none requires equal lengths"))
var l=Array(2)
if(l[0]=t.map(z),l[1]=i.map(z),e.optimize!==d)for(var c=0;c<t.length;c++){var v=t[c],s=i[c]
w(u?a:v.x+v.w*a,u?f:v.y+v.h*f,l[0][c]),w(u?a:s.x+s.w*a,u?f:s.y+s.h*f,l[1][c])}return e.optimize===h&&function(r,n){for(var e=r[0].length,t=0;t<e;t++){var i=r[0][t],o=r[1][t],a=y(i.length+n,o.length+n)
r[0][t]=A(i,a),r[1][t]=A(o,a)}}(l,6*e.addPoints),l}function b(r){return r.data.slice().sort(o)}function z(r){return r.d}var s={addPoints:0,optimize:h,origin:{x:0,y:0},precision:0}
function q(r,n){n=x(n,s),r&&2<=r.length||B("invalid arguments")
for(var t=r.length-1,i=Array(t),e=0;e<t;e++)i[e]=D(r[e],r[e+1],n)
var o=n.precision?function(r){return r.toFixed(n.precision)}:a
return function(r){var n=t*r,e=u(l(n),t-1)
return function(r,n){if(g(r))return r
for(var e=[],t=0;t<r.length;t++){var i=r[t]
e.push(C,n(i[0]),n(i[1]),E)
for(var o=void 0,a=2;a<i.length;a+=6){var f=n(i[a]),u=n(i[a+1]),l=n(i[a+2]),c=n(i[a+3]),v=n(i[a+4]),s=n(i[a+5])
f==v&&l==v&&u==s&&c==s&&o==(o=""+f+u+l+c+v+s)||e.push(f,u,l,c,v,s)}}return e.join(p)}(i[e]((n-e)/(e+1)),o)}}function D(t,i,r){var o=v(t,i,r),a=o[0].length
return function(r){if(I(r-0)<f)return t.path
if(I(r-1)<f)return i.path
for(var n=Array(a),e=0;e<a;e++)n[e]=G(o[0][e],o[1][e],r)
return n}}function G(r,n,e){for(var t=r.length,i=m(t),o=0;o<t;o++)i[o]=r[o]+(n[o]-r[o])*e
return i}function J(r,n){return r===_?n:r}var K=120*U/180,N=2*U
function R(r,n,e,t,i,o,a,f,u,l,c,v,s){if(e<=0||t<=0)return[r,n,f,u,f,u]
var p,h=U/180*(+i||0),d=O(h),g=V(h),y=!!l
if(!y){var x=r,m=f,w=((r=x*d-n*-g)-(f=m*d-u*-g))/2,A=((n=x*-g+n*d)-(u=m*-g+u*d))/2,b=w*w/(e*e)+A*A/(t*t)
1<b&&(e*=b=L(b),t*=b)
var z=(o===a?-1:1)*L(I((e*e*t*t-e*e*A*A-t*t*w*w)/(e*e*A*A+t*t*w*w)))
v=z*e*A/t+(r+f)/2,l=Q((n-(s=z*-t*w/e+(n+u)/2))/t),c=Q((u-s)/t),r<v&&(l=U-l),f<v&&(c=U-c),l<0&&(l+=N),c<0&&(c+=N),a&&c<l&&(l-=N),!a&&l<c&&(c-=N)}if(I(c-l)>K){var q=c,M=f,P=u
p=R(f=v+e*O(c=l+K*(a&&l<c?1:-1)),u=s+t*V(c),e,t,i,0,a,M,P,c,q,v,s)}else p=[]
var j=4/3*Z((c-l)/4)
if(p.splice(0,0,2*r-(r+j*e*V(l)),2*n-(n-j*t*O(l)),f+j*e*V(c),u-j*t*O(c),f,u),!y)for(var S=0,C=p.length;S<C;S+=2){var E=p[S],T=p[S+1]
p[S]=E*d-T*g,p[S+1]=E*g+T*d}return p}var W={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function X(r,n,e,t,i,o,a){var f=r.x,u=r.y
r.x=J(o,f),r.y=J(a,u),r.p.push(J(n,f),e=J(e,u),t=J(t,f),i=J(i,u),r.x,r.y),r.lc=r.c}function Y(r){var n=r.c,e=r.t,t=r.x,i=r.y
if(n===M)e[0]+=i
else if(n===P)e[0]+=t
else if(n===H)e[5]+=t,e[6]+=i
else for(var o=0;o<e.length;o+=2)e[o]+=t,e[o+1]+=i}function rr(r){return r.split(p).map(nr)}function nr(r,n){return 0===n?r:+r}function er(r){for(var n={x:0,y:0,s:[]},e=r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(rr),t=0;t<e.length;t++){var i=e[t],o=i[0],a=o.toUpperCase(),f=a!==S&&a!==o
n.c=a
var u=W[a],l=i,c=1
do{n.t=1===l.length?l:l.slice(c,c+u),f&&Y(n)
var v=n.t,s=n.x,p=n.y,h=void 0,d=void 0,g=void 0,y=void 0,x=void 0,m=void 0
if(a===C)n.s.push(n.p=[n.x=v[0],n.y=v[1]])
else if(a===P)X(n,_,_,_,_,v[0],_)
else if(a===M)X(n,_,_,_,_,_,v[0])
else if(a===j)X(n,_,_,_,_,v[0],v[1])
else if(a===S)X(n,_,_,_,_,n.p[0],n.p[1])
else if(a===E)X(n,v[0],v[1],v[2],v[3],v[4],v[5]),n.cx=v[2],n.cy=v[3]
else if(a===T){var w=n.lc!==T&&n.lc!==E
X(n,h=w?_:2*s-n.cx,d=w?_:2*p-n.cy,v[0],v[1],v[2],v[3]),n.cx=v[0],n.cy=v[1]}else if(a===$){var A=v[0],b=v[1]
g=v[2],y=v[3],X(n,s+(A-s)*k,p+(b-p)*k,g+(A-g)*k,y+(b-y)*k,g,y),n.cx=A,n.cy=b}else if(a===F)g=v[0],y=v[1],n.lc===$||n.lc===F?(h=s+(2*s-n.cx-s)*k,d=p+(2*p-n.cy-p)*k,x=g+(2*s-n.cx-g)*k,m=y+(2*p-n.cy-y)*k):(h=x=s,d=m=p),X(n,h,d,x,m,g,y),n.cx=x,n.cy=m
else if(a===H)for(var z=R(s,p,v[0],v[1],v[2],v[3],v[4],v[5],v[6]),q=0;q<z.length;q+=6)X(n,z[q],z[q+1],z[q+2],z[q+3],z[q+4],z[q+5])
else B(n.c," is not supported")
c+=u}while(c<l.length)}return n.s}function tr(r){for(var n=r[0],e=r[1],t=e,i=n,o=2;o<r.length;o+=6){var a=r[o+4],f=r[o+5]
n=u(n,a),i=y(i,a),e=u(e,f),t=y(t,f)}return{d:r,x:n,y:e,w:i-n,h:t-e,p:function(r){for(var n=r.length,e=r[n-2],t=r[n-1],i=0,o=0;o<n;o+=6)i+=c(r[o],r[o+1],e,t),e=r[o],t=r[o+1]
return l(i)}(r)}}var ir=/^([#|\.]|path)/i
function or(r){return{path:n=function(r){if(g(r)){if(!ir.test(r))return r
r=document.querySelector(r)}return r.getAttribute("d")}(r),data:er(n).map(tr)}
var n}r.interpolate=function(r,n){return q(r.map(or),n||{})},Object.defineProperty(r,"__esModule",{value:!0})})
